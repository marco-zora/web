<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BlazorApp1</title>
    <base href="/web/" />
    <link rel="preload" id="webassembly" />
    <link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/app.css" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link href="BlazorApp1.styles.css" rel="stylesheet" />
    <script type="importmap"></script>
</head>


<!-- (Obbligatorio per il toggle) -->

<script>
    window.previewObserver = (function () {
        let observer = null;
        let animated = false;
        const seen = new Set();

        function init() {
            if (observer) return;
            observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const el = entry.target;
                    if (!(el instanceof HTMLVideoElement)) return;

                    if (!animated) { el.pause(); return; }

                    if (entry.isIntersecting) {
                        el.muted = true;
                        el.loop = true;
                        try { el.preload = 'auto'; } catch { }
                        el.play().catch(() => { });
                    } else {
                        el.pause();
                    }
                });
            }, {
                root: null,
                rootMargin: '100px 0px',
                threshold: 0.25
            });
        }

        function observe(el) {
            if (!el || !el.id || seen.has(el.id)) return;
            seen.add(el.id);
            observer.observe(el);
        }

        function scan() {
            init();
            document.querySelectorAll('video[data-preview="1"]').forEach(observe);
        }

        function setAnimated(on) {
            animated = !!on;
            if (!animated) {
                document.querySelectorAll('video[data-preview="1"]').forEach(v => v.pause());
            } else {
                document.querySelectorAll('video[data-preview="1"]').forEach(v => {
                    const r = v.getBoundingClientRect();
                    const h = window.innerHeight || document.documentElement.clientHeight;
                    const inView = r.bottom >= 0 && r.top <= h;
                    if (inView) {
                        v.muted = true;
                        v.loop = true;
                        try { v.preload = 'auto'; } catch { }
                        v.play().catch(() => { });
                    }
                });
            }
        }

        function dispose() {
            if (observer) { observer.disconnect(); observer = null; }
            seen.clear();
        }

        return { init, scan, setAnimated, dispose };
    })();
</script>




<body>
    <div id="app">
        <svg class="loading-progress">
            <circle r="40%" cx="50%" cy="50%" />
            <circle r="40%" cx="50%" cy="50%" />
        </svg>
        <div class="loading-progress-text"></div>
    </div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="." class="reload">Reload</a>
        <span class="dismiss">ðŸ—™</span>
    </div>
    <script src="gh-pages.js"></script>
    <!-- <script src="_framework/blazor.webassembly.js"></script> -->
    <script src="_framework/blazor.webassembly#[.{fingerprint}].js"></script>
</body>

</html>
